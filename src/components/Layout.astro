---
import LanguageSwitcher from "./LanguageSwitcher.astro";
const { lang, title } = Astro.props;
---

<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title} | Mountain B&B</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Lora:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/src/styles/global.css" />
  </head>
  <body class="bg-bg text-brand font-sans antialiased">
    <header
      class="border-b border-brand/10 bg-white sticky top-0 z-50"
    >
      <nav class="max-w-5xl mx-auto p-4 flex justify-between items-center">
        <a href={`/${lang}/`} class="text-xl font-bold font-serif text-brand">
          Mountain B&B
        </a>

        <div class="flex items-center gap-4">
          <div class="hidden md:block">
            <LanguageSwitcher />
          </div>

          <button
            class="md:hidden text-brand hover:text-brand/80 transition-colors p-2 relative w-10 h-10 flex items-center justify-center"
            id="mobile-menu-toggle"
            aria-label="Toggle Navigation Menu"
            aria-expanded="false"
          >
            <div class="hamburger-icon">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </button>
        </div>
      </nav>

      <!-- Desktop Navigation -->
      <div class="hidden md:block border-t border-brand/10">
        <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-center gap-8">
          <a
            href={`/${lang}/`}
            class="desktop-menu-item"
            >Home</a
          >
          <a
            href={`/${lang}/gallery`}
            class="desktop-menu-item"
            >Gallery</a
          >
          <a
            href={`/${lang}/apartments`}
            class="desktop-menu-item"
            >Apartments</a
          >
          <a
            href={`/${lang}/rooms`}
            class="desktop-menu-item"
            >Rooms</a
          >
          <a
            href={`/${lang}/info`}
            class="desktop-menu-item"
            >Info</a
          >
          <a
            href={`/${lang}/contacts`}
            class="desktop-menu-item"
            >Contacts</a
          >
        </div>
      </div>

      <!-- Mobile Navigation -->
      <div
        id="mobile-menu-links"
        class="mobile-menu md:hidden"
      >
        <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col gap-1">
          <a
            href={`/${lang}/`}
            class="mobile-menu-item"
            >Home</a
          >
          <a
            href={`/${lang}/gallery`}
            class="mobile-menu-item"
            >Gallery</a
          >
          <a
            href={`/${lang}/apartments`}
            class="mobile-menu-item"
            >Apartments</a
          >
          <a
            href={`/${lang}/rooms`}
            class="mobile-menu-item"
            >Rooms</a
          >
          <a
            href={`/${lang}/info`}
            class="mobile-menu-item"
            >Info</a
          >
          <a
            href={`/${lang}/contacts`}
            class="mobile-menu-item"
            >Contacts</a
          >
          <div class="mt-4 pt-4 border-t border-brand/10 w-full">
            <LanguageSwitcher />
          </div>
        </div>
      </div>
    </header>

    <main class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
      <slot />
    </main>

    <footer class="mt-16 py-8 border-t border-brand/10">
      <div class="max-w-5xl mx-auto px-4 text-center text-brand/60">
        <p>
          &copy; {new Date().getFullYear()} Mountain B&B. All rights reserved.
        </p>
        <p class="text-sm">A traditional home in the mountains.</p>
      </div>
    </footer>

    <style>
      /* Hamburger Icon Animation */
      .hamburger-icon {
        width: 24px;
        height: 18px;
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      .hamburger-icon span {
        display: block;
        height: 2px;
        width: 100%;
        background-color: currentColor;
        border-radius: 2px;
        transition: all 0.3s ease-in-out;
        transform-origin: center;
      }

      /* Active state - transform into X */
      .menu-open .hamburger-icon span:nth-child(1) {
        transform: translateY(8px) rotate(45deg);
      }

      .menu-open .hamburger-icon span:nth-child(2) {
        opacity: 0;
        transform: scaleX(0);
      }

      .menu-open .hamburger-icon span:nth-child(3) {
        transform: translateY(-8px) rotate(-45deg);
      }

      /* Desktop Menu Styling */
      .desktop-menu-item {
        color: rgba(var(--brand-rgb, 74, 85, 104), 0.75);
        font-weight: 500;
        font-size: 0.9375rem;
        letter-spacing: 0.025em;
        text-transform: uppercase;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        transition: all 0.2s ease-in-out;
        position: relative;
      }

      .desktop-menu-item::after {
        content: '';
        position: absolute;
        bottom: 0.25rem;
        left: 0.75rem;
        right: 0.75rem;
        height: 2px;
        background-color: currentColor;
        transform: scaleX(0);
        transition: transform 0.2s ease-in-out;
      }

      .desktop-menu-item:hover {
        color: var(--brand, #4a5568);
      }

      .desktop-menu-item:hover::after {
        transform: scaleX(1);
      }

      /* Mobile Menu Styling */
      .mobile-menu {
        max-height: 0;
        overflow: hidden;
        background: white;
        border-top: 1px solid transparent;
        transition: max-height 0.4s ease-in-out, border-color 0.3s ease-in-out;
      }

      .mobile-menu.menu-open {
        max-height: 500px;
        border-color: rgba(var(--brand-rgb, 74, 85, 104), 0.1);
      }

      .mobile-menu-item {
        display: block;
        padding: 0.875rem 1rem;
        color: rgba(var(--brand-rgb, 74, 85, 104), 0.8);
        font-size: 1.125rem;
        font-weight: 500;
        letter-spacing: 0.01em;
        border-radius: 0.5rem;
        transition: color 0.2s ease-in-out;
      }

      .mobile-menu-item:hover {
        color: var(--brand, #4a5568);
      }

      .mobile-menu-item:active {
        color: var(--brand, #4a5568);
      }
    </style>

    <script is:inline>
      const toggle = document.getElementById("mobile-menu-toggle");
      const menu = document.getElementById("mobile-menu-links");

      if (toggle && menu) {
        toggle.addEventListener("click", () => {
          const isOpen = menu.classList.contains("menu-open");
          
          menu.classList.toggle("menu-open");
          toggle.classList.toggle("menu-open");
          toggle.setAttribute("aria-expanded", !isOpen);
        });

        // Close menu when clicking on a link
        const menuLinks = menu.querySelectorAll("a");
        menuLinks.forEach(link => {
          link.addEventListener("click", () => {
            menu.classList.remove("menu-open");
            toggle.classList.remove("menu-open");
            toggle.setAttribute("aria-expanded", "false");
          });
        });

        // Close menu when clicking outside
        document.addEventListener("click", (e) => {
          if (!toggle.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.remove("menu-open");
            toggle.classList.remove("menu-open");
            toggle.setAttribute("aria-expanded", "false");
          }
        });
      }
    </script>
  </body>
</html>